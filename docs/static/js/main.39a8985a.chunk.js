(this["webpackJsonpmydria-app"]=this["webpackJsonpmydria-app"]||[]).push([[0],{115:function(e,t,a){e.exports=a(147)},121:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(34),o=a.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(120),a(121);var i=a(29),c=a(61),l=a(12),u={SET_USER_NICKNAME:"SET_USER_NICKNAME",SET_USER_EMAIL:"SET_USER_EMAIL",SET_USER_PROFILE_PICTURE:"SET_USER_PROFILE_PICTURE",SET_USER_FOLLOWING:"SET_USER_FOLLOWING",SET_USER_FOLLOWEDBY:"SET_USER_FOLLOWEDBY",UNSET_USER:"UNSET_USER",SET_SESSION_TOKEN:"SET_SESSION_TOKEN",SET_SESSION_USERID:"SET_SESSION_USERID",SET_SESSION_ACTIVE:"SET_SESSION_ACTIVE",SET_DARK_THEME:"SET_DARK_THEME"};var m=u,d={active:!1,token:null,userId:null},p={nickname:null,profilePicture:null,email:null,following:[],followedBy:[]},h=Object(c.b)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_SESSION_TOKEN:return Object(l.a)(Object(l.a)({},e),{},{token:t.token});case m.SET_SESSION_USERID:return Object(l.a)(Object(l.a)({},e),{},{userId:t.userId});case m.SET_SESSION_ACTIVE:return t.active?Object(l.a)(Object(l.a)({},e),{},{active:!0}):d;case m.SET_DARK_THEME:return Object(l.a)(Object(l.a)({},e),{},{darkTheme:t.active});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_USER_EMAIL:return Object(l.a)(Object(l.a)({},e),{},{email:t.email});case m.SET_USER_NICKNAME:return Object(l.a)(Object(l.a)({},e),{},{nickname:t.nickname});case m.SET_USER_PROFILE_PICTURE:return Object(l.a)(Object(l.a)({},e),{},{profilePicture:t.profilePicture});case m.SET_USER_FOLLOWING:return Object(l.a)(Object(l.a)({},e),{},{following:t.following});case m.SET_USER_FOLLOWEDBY:return Object(l.a)(Object(l.a)({},e),{},{followedBy:t.followedBy});case m.UNSET_USER:return p;default:return e}}}),f=a(22),g=a(49),b=a(5),v=a.n(b),k=a(9),E=a(14),y=a(15),w=a(2),P=a(17),O=a(16),j=a(25),S=a.n(j),C=a(20),x=a.n(C),D="https://mydria-api.herokuapp.com",N={validateSession:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{active:!1});case 2:return a={},e.prev=3,e.next=6,S()({url:D+"/session",method:"get",headers:{"x-access-token":t}});case 6:n=e.sent,a={active:!0,userData:n.data},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),a={active:!1};case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(k.a)(v.a.mark((function e(t,a){var n,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a){e.next=2;break}return e.abrupt("return",{success:!1});case 2:return n={email:t,password:a},r={},e.prev=4,e.next=7,S()({method:"post",url:D+"/login",data:n});case 7:s=e.sent,r={success:!0,token:s.data.token,userId:s.data.userId},e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r={success:!1,message:e.t0.response?e.t0.response.data:"An internal error ocurred at our server. Please try again later."};case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}(),signup:function(){var e=Object(k.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,e.next=4,S()({method:"post",url:D+"/users",data:t});case 4:e.sent,a={success:!0},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a={success:!1,message:e.t0.response.data};case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),loadSomePosts:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,a=x.a.get("token"),e.next=5,S()({method:"get",url:D+"/posts/users",headers:{"x-access-token":a}});case 5:n=e.sent,(t=n.data).sort((function(e,t){var a=new Date(e.date);return new Date(t.date).getTime()-a.getTime()})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t={success:!1,message:e.t0.response.data};case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),publishPost:function(){var e=Object(k.a)(v.a.mark((function e(t,a){var n,r,s,o,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},e.prev=1,r=x.a.get("token"),s={"x-access-token":r},!a){e.next=19;break}return o=new FormData,i=document.getElementById("post-file"),o.append("file",i.files[0]),e.prev=8,e.next=11,S()({url:D+"/images",method:"post",headers:{"x-access-token":r,"Content-Type":"multipart/form-data; ".concat(o._boundary)},data:o});case 11:c=e.sent,n={success:!0,data:c.data},e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),n={success:!1,error:e.t0.response};case 18:t.img=n.data.id;case 19:return e.next=21,S()({url:D+"/posts",method:"post",headers:s,data:t});case 21:l=e.sent,n={success:!0,post:l.data},e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1),n={success:!1,error:e.t1.response};case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,null,[[1,25],[8,15]])})));return function(t,a){return e.apply(this,arguments)}}(),likePost:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/post/".concat(t,"/like"),method:"post",headers:{"x-access-token":n}});case 5:r=e.sent,a={success:!0,post:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),unlikePost:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/post/".concat(t,"/unlike"),method:"post",headers:{"x-access-token":n}});case 5:r=e.sent,a={success:!0,post:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),updatePost:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/post/".concat(t._id),method:"put",headers:{"x-access-token":n},data:t});case 5:r=e.sent,a={success:!0,post:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),deletePost:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/post/".concat(t),method:"delete",headers:{"x-access-token":n}});case 5:r=e.sent,a={success:!0,post:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),getUserData:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/user/".concat(t),method:"get",headers:{"x-access-token":n}});case 5:r=e.sent,a={success:!0,userData:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),getUserPosts:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,e.next=4,S()({url:D+"/posts/".concat(t),method:"get"});case 4:n=e.sent,a={success:!0,posts:n.data},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),followUser:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/follow/".concat(t),method:"post",headers:{"x-access-token":n}});case 5:e.sent,a={success:!0},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),unfollowUser:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/follow/".concat(t),method:"delete",headers:{"x-access-token":n}});case 5:e.sent,a={success:!0},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),updateUserData:function(){var e=Object(k.a)(v.a.mark((function e(t,a){var n,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,r=x.a.get("token"),e.next=5,S()({url:D+"/user/".concat(t),method:"put",headers:{"x-access-token":r},data:a});case 5:s=e.sent,n={success:!0,userData:s.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n={success:!1,error:e.t0.response};case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),uploadProfilePicture:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a=new FormData,n=document.getElementById("file"),a.append("file",n.files[0]),e.prev=4,r=x.a.get("token"),e.next=8,S()({url:D+"/profile-pic",method:"post",headers:{"x-access-token":r,"Content-Type":"multipart/form-data; ".concat(a._boundary)},data:a});case 8:e.sent,t={success:!0},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),t={success:!1,error:e.t0.response};case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),resolveImageUrl:function(e){return e?D+"/image/".concat(e):"/assets/user.svg"},setTmpImage:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},(a=new FormData).append("tmp",!0),n=document.getElementById("post-file"),a.append("file",n.files[0]),e.prev=5,r=x.a.get("token"),e.next=9,S()({url:D+"/tmp",method:"post",headers:{"x-access-token":r,"Content-Type":"multipart/form-data; ".concat(a._boundary)},data:a});case 9:s=e.sent,t={success:!0,data:s.data},e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),t={success:!1,error:e.t0.response};case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),getTmpImageUrl:function(e,t){return D+"/tmp/".concat(e,"?ext=").concat(t)},getPostComments:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/post/".concat(t,"/comments"),method:"get",headers:{"x-access-token":n}});case 5:r=e.sent,a={success:!0,data:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),publishComment:function(){var e=Object(k.a)(v.a.mark((function e(t,a){var n,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,r=x.a.get("token"),e.next=5,S()({url:D+"/post/".concat(a,"/comments"),method:"post",headers:{"x-access-token":r},data:t});case 5:s=e.sent,n={success:!0,data:s.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n={success:!1,error:e.t0.response};case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),deleteComment:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/comment/".concat(t),method:"delete",headers:{"x-access-token":n}});case 5:e.sent,a={success:!0},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),updateComment:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/comment/".concat(t._id),method:"put",headers:{"x-access-token":n},data:t});case 5:r=e.sent,a={success:!0,data:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),sharePost:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r,s,o,i=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"",n=i.length>2&&void 0!==i[2]?i[2]:[],r={},e.prev=3,s=x.a.get("token"),e.next=7,S()({url:D+"/post/".concat(t,"/share"),method:"post",headers:{"x-access-token":s},data:{text:a,tags:n}});case 7:o=e.sent,r={success:!0,data:o.data},e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),r={success:!1,error:e.t0.response};case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),getNotifications:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,a=x.a.get("token"),e.next=5,S()({url:D+"/notifications",method:"get",headers:{"x-access-token":a}});case 5:n=e.sent,t={success:!0,data:n.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t={success:!1,error:e.t0.response};case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),loadPostData:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/post/".concat(t),method:"get",headers:{"x-access-token":n}});case 5:r=e.sent,a={success:!0,data:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),search:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=x.a.get("token"),e.next=5,S()({url:D+"/posts".concat(t),method:"get",headers:{"x-access-token":n}});case 5:r=e.sent,a={success:!0,data:r.data},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a={success:!1,error:e.t0.response};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},T=function(e){return r.a.createElement("h1",{className:"my-logo"},"Mydria")},F=a(13),I=a(10),M=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).handleLogin=n.handleLogin.bind(Object(w.a)(n)),n.handleKeyPress=n.handleKeyPress.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"handleKeyPress",value:function(e){13===e.charCode&&this.handleLogin()}},{key:"handleLogin",value:function(){var e=document.getElementById("email-input").value,t=document.getElementById("password-input").value;this.props.doLogin({email:e,password:t})}},{key:"render",value:function(){return r.a.createElement(I.a,null,r.a.createElement(I.a.Group,{controlId:"email-input"},r.a.createElement(I.a.Control,{type:"email",name:"email",placeholder:"E-mail",onKeyPress:this.handleKeyPress})),r.a.createElement(I.a.Group,{controlId:"password-input"},r.a.createElement(I.a.Control,{type:"password",name:"password",placeholder:"Password",onKeyPress:this.handleKeyPress})),r.a.createElement(F.a,{variant:"info",onClick:this.handleLogin,block:!0},"Login"))}}]),a}(n.Component),_=a(75),U=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={email:"",nickname:"",password:"",passwordAgain:""},n.handleChange=n.handleChange.bind(Object(w.a)(n)),n.handleSignup=n.handleSignup.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(_.a)({},t,a))}},{key:"handleSignup",value:function(){this.props.doSignup(this.state)}},{key:"render",value:function(){return r.a.createElement(I.a,null,r.a.createElement(I.a.Group,{controlId:"formSignupEmail"},r.a.createElement(I.a.Control,{type:"email",name:"email",placeholder:"E-mail",value:this.state.email,onChange:this.handleChange.bind(this)}),r.a.createElement(I.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(I.a.Group,{controlId:"formSignupNickname"},r.a.createElement(I.a.Control,{type:"text",name:"nickname",placeholder:"Nickname",value:this.state.nickname,onChange:this.handleChange.bind(this)})),r.a.createElement(I.a.Group,{controlId:"formSignupPassword"},r.a.createElement(I.a.Control,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange.bind(this)})),r.a.createElement(I.a.Group,{controlId:"formSignupPasswordAgain"},r.a.createElement(I.a.Control,{type:"password",name:"passwordAgain",placeholder:"Password again",value:this.state.passwordAgain,onChange:this.handleChange.bind(this)}),r.a.createElement(I.a.Text,{className:"text-muted"},"Warning: this is NOT a secure application! Do not use your passwords from another accounts (email, social networks, etc).")),r.a.createElement(I.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(I.a.Check,{type:"checkbox",label:"I totally agree with the Privacy Policy"})),r.a.createElement(F.a,{variant:"success",onClick:this.handleSignup,block:!0},"Sign up"))}}]),a}(n.Component),B=a(26),L=a(11),R=a(21),A=a(35),K=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={sessionActive:!1,message:"",messageType:"",showSignupForm:!1},n.doLogin=n.doLogin.bind(Object(w.a)(n)),n.doSignup=n.doSignup.bind(Object(w.a)(n)),n.renderMessage=n.renderMessage.bind(Object(w.a)(n)),n.renderFormFooter=n.renderFormFooter.bind(Object(w.a)(n)),n.showLogin=n.showLogin.bind(Object(w.a)(n)),n.showSignup=n.showSignup.bind(Object(w.a)(n)),n.renderForm=n.renderForm.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.a.get("token"),e.next=3,N.validateSession(t);case 3:e.sent.active&&this.setState({sessionActive:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doLogin",value:function(){var e=Object(k.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.login(t.email,t.password);case 2:(a=e.sent).success?(x.a.set("token",a.token),x.a.set("userId",a.userId),this.setState({sessionActive:!0})):this.setState({message:a.message,messageType:"warning"});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"doSignup",value:function(){var e=Object(k.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.signup(t);case 2:(a=e.sent).success?(this.showLogin(),this.setState({message:"Account successfuly created. You may now login.",messageType:"success"})):this.setState({message:a.message,messageType:"warning"});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderMessage",value:function(){return this.state.message.length?r.a.createElement(A.a,{variant:this.state.messageType,className:"mb-0"},this.state.message):r.a.createElement(A.a,{variant:"link",className:"mb-0 color-transparent"},".")}},{key:"showSignup",value:function(){this.setState({showSignupForm:!0,message:""})}},{key:"showLogin",value:function(){this.setState({showSignupForm:!1,message:""})}},{key:"renderForm",value:function(){return this.state.showSignupForm?r.a.createElement(U,{doSignup:this.doSignup}):r.a.createElement(M,{doLogin:this.doLogin})}},{key:"renderFormFooter",value:function(){var e=this.state.showSignupForm?r.a.createElement(F.a,{variant:"link",block:!0,onClick:this.showLogin},"Login"):r.a.createElement(F.a,{variant:"link",block:!0,onClick:this.showSignup},"Sign up");return r.a.createElement(R.a,{className:"justify-content-md-between"},r.a.createElement(L.a,{sm:"auto",className:"justify-content-center"},r.a.createElement(F.a,{variant:"link",block:!0},"Privacy Policy")),r.a.createElement(L.a,{sm:"auto",className:"justify-content-center"},e))}},{key:"render",value:function(){return this.state.sessionActive?r.a.createElement(i.a,{to:"/feed"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"my-login-background"}),r.a.createElement(B.a,{className:"my-login-container"},r.a.createElement(R.a,{className:"align-items-center my-full-height"},r.a.createElement(L.a,{md:"6",lg:"7",className:"my-login-phrase d-none d-lg-block"},"Get in touch with your interests, while sharing your thoughts with the world."),r.a.createElement(L.a,{md:"6",lg:"4",xl:"3",className:"my-login-box pt-4 pb-3"},r.a.createElement(T,null),this.renderForm(),this.renderFormFooter(),this.renderMessage()))))}}]),a}(n.Component),G=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"my-login-background my-not-found-page"},r.a.createElement(T,null),r.a.createElement("p",null,"404 - Ops... nothing found here. \ud83e\udd37\u200d\u2642\ufe0f"))}}]),a}(n.Component),H=a(39);function W(e){return Object(l.a)({},e)}function Q(e){return{setDarkTheme:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:u.SET_DARK_THEME,active:e}}(t))},setSessionActive:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:u.SET_SESSION_ACTIVE,active:e}}(t))},setSessionUserId:function(t){return e(function(e){return{type:u.SET_SESSION_USERID,userId:e}}(t))},setSessionToken:function(t){return e(function(e){return{type:u.SET_SESSION_TOKEN,token:e}}(t))},setUserEmail:function(t){return e(function(e){return{type:u.SET_USER_EMAIL,email:e}}(t))},setUserNickname:function(t){return e(function(e){return{type:u.SET_USER_NICKNAME,nickname:e}}(t))},setUserFollowing:function(t){return e(function(e){return{type:u.SET_USER_FOLLOWING,following:e}}(t))},setUserFollowedBy:function(t){return e(function(e){return{type:u.SET_USER_FOLLOWEDBY,followedBy:e}}(t))},setUserProfilePicture:function(t){return e({type:u.SET_USER_PROFILE_PICTURE,profilePicture:t})},unsetUser:function(){return e({type:u.UNSET_USER})}}}var z=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).logout=n.logout.bind(Object(w.a)(n)),n.sessionInit=n.sessionInit.bind(Object(w.a)(n)),n.toggleDarkTheme=n.toggleDarkTheme.bind(Object(w.a)(n)),n.getPageClasses=n.getPageClasses.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r,s,o,i,c,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.a.get("token"),e.next=3,N.validateSession(t);case 3:(a=e.sent).active?(n=x.a.get("token"),r=a.userData.email,s=a.userData.nickname,o=a.userData.profilePicture,i=a.userData.following,c=a.userData.followedBy,l=a.userData._id,u="true"===x.a.get("darkTheme"),this.sessionInit(n,l,r,s,i,c,o,u),this.loadPageData()):this.logout();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sessionInit",value:function(e,t,a,n,r,s,o,i){this.props.setSessionActive(!0),this.props.setSessionUserId(t),this.props.setSessionToken(e),this.props.setUserEmail(a),this.props.setUserNickname(n),this.props.setUserFollowing(r),this.props.setUserFollowedBy(s),this.props.setUserProfilePicture(o),this.props.setDarkTheme(i)}},{key:"logout",value:function(){x.a.remove("token"),x.a.remove("userId"),this.props.setSessionActive(!1),this.props.unsetUser(),this.setState({sessionExpired:!0})}},{key:"getDarkTheme",value:function(){return this.props.session.darkTheme?" my-dark-theme":""}},{key:"getPageClasses",value:function(){return"my-page-container"+(this.props.session.darkTheme?" dark-theme":"")}},{key:"toggleDarkTheme",value:function(){var e=this.props.session.darkTheme;x.a.set("darkTheme",!e),this.props.setDarkTheme(!e),this.setState({})}}]),a}(n.Component),Y=a(100),q=a(42),J=a(98),V=a(57),$=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).getHref=n.getHref.bind(Object(w.a)(n)),n.handleClick=n.handleClick.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"getClasses",value:function(){var e="my-profile-picture-wrapper";return e+=this.props.noMargin?"":" mr-3",e+=" ".concat(this.props.size),this.props.mobileOnly?e+=" d-inline-block d-sm-none":this.props.tabletDesktopOnly&&(e+=" d-none d-sm-inline-block"),this.props.block&&(e+=" block"),e}},{key:"pictureUrl",value:function(){return N.resolveImageUrl(this.props.pictureId)}},{key:"getHref",value:function(){return"max"===this.props.size?"#":"/profile/"+this.props.nickname}},{key:"handleClick",value:function(e){e.preventDefault(),"function"===typeof this.props.handleClick&&this.props.handleClick()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.getClasses()},"max"===this.props.size?r.a.createElement("a",{className:"my-profile-picture"+(this.props.square?" square":""),style:{backgroundImage:"url(".concat(this.pictureUrl(),")")},href:"",onClick:function(t){return e.handleClick(t)}}):r.a.createElement("a",{className:"my-profile-picture"+(this.props.square?" square":""),href:this.getHref(),style:{backgroundImage:"url(".concat(this.pictureUrl(),")")}}))}}]),a}(n.Component),X=a(18),Z=a(19),ee=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).toggleDarkTheme=n.toggleDarkTheme.bind(Object(w.a)(n)),n.renderMobileIcon=n.renderMobileIcon.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"isDarkTheme",value:function(){return this.Cookies.get("darkTheme")}},{key:"toggleDarkTheme",value:function(){this.props.toggleDarkTheme()}},{key:"renderMobileIcon",value:function(){return r.a.createElement("div",{className:"mr-3 h-100 d-flex align-items-center",onClick:this.toggleDarkTheme},this.props.session.darkTheme?r.a.createElement(X.a,{icon:Z.l,className:"my-moon-icon"}):r.a.createElement(X.a,{icon:Z.o,className:"my-sun-icon"}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"my-theme-switch d-none d-lg-flex row align-items-center ml-0 mr-3"},r.a.createElement(X.a,{icon:Z.o,className:"my-sun-icon"}),r.a.createElement(I.a.Check,{type:"switch",id:"my-theme-switch-desktop",label:"",className:"mr-2 ml-2",checked:this.props.session.darkTheme,onChange:this.toggleDarkTheme}),r.a.createElement(X.a,{icon:Z.l,className:"my-moon-icon"})),r.a.createElement("div",{className:"my-theme-switch-mobile d-xs-flex d-lg-none align-items-center"},this.renderMobileIcon()))}}]),a}(r.a.Component),te=Object(f.b)(W)(ee),ae=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).getLabel=n.getLabel.bind(Object(w.a)(n)),n.state={months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},n}return Object(y.a)(a,[{key:"getLabel",value:function(){var e="unknown type";switch(this.props.data.type){case"POST_LIKED":e=" liked your post.";break;case"POST_UNLIKED":e=" unliked your post.";break;case"POST_COMMENTED":e=" commented on your post.";break;case"POST_SHARED":e=" shared your post.";break;case"FOLLOW":e=" started following you."}return r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,this.props.data.from.nickname),e)}},{key:"getDateLabel",value:function(){var e=new Date,t=new Date(this.props.data.date);if(e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()){var a=(e.getTime()-t.getTime())/1e3/60;return(a=Math.floor(a))+" min"}var n=t.getDate(),r=this.state.months[t.getMonth()],s=t.getHours(),o=t.getMinutes();return"".concat(r," ").concat(n," - ").concat(s>9?s:"0"+s,":").concat(o>9?o:"0"+o)}},{key:"getHref",value:function(){return"FOLLOW"===this.props.data.type?"/profile/".concat(this.props.data.from.nickname):"/post/".concat(this.props.data.post._id)}},{key:"render",value:function(){return r.a.createElement(q.a.Item,{href:this.getHref(),className:"my-notification d-flex align-center w-100"},r.a.createElement($,{nickname:this.props.data.from.nickname,pictureId:this.props.data.from.profilePicture,size:"tiny"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"my-notification-label"},this.getLabel()),r.a.createElement("div",{className:"my-notification-date"},this.getDateLabel())))}}]),a}(r.a.Component),ne=Object(f.b)(W)(ae),re=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).logout=n.logout.bind(Object(w.a)(n)),n.state={userPictureUrl:N.resolveImageUrl(e.user.profilePicture),showMobileSearch:!1,notifications:[],notificationsLoaded:!1},n.toggleMobileSearch=n.toggleMobileSearch.bind(Object(w.a)(n)),n.renderMobileSearchReturnButton=n.renderMobileSearchReturnButton.bind(Object(w.a)(n)),n.toggleDarkTheme=n.toggleDarkTheme.bind(Object(w.a)(n)),n.loadNotifications=n.loadNotifications.bind(Object(w.a)(n)),n.renderNotifications=n.renderNotifications.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"logout",value:function(){this.props.logout()}},{key:"toggleMobileSearch",value:function(){this.setState({showMobileSearch:!this.state.showMobileSearch})}},{key:"toggleDarkTheme",value:function(){this.props.toggleDarkTheme()}},{key:"loadNotifications",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.notificationsLoaded){e.next=6;break}return e.next=3,N.getNotifications();case 3:t=e.sent,a=[],t.success&&(a=t.data,this.setState({notifications:a,notificationsLoaded:!0}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderMobileSearchReturnButton",value:function(){return this.state.showMobileSearch?r.a.createElement(I.a.Group,{controlId:"formBasicReturn",className:"my-return-button"},r.a.createElement(F.a,{variant:"dark",onClick:this.toggleMobileSearch},r.a.createElement(X.a,{icon:Z.a,className:"my-profile-data-icon"}))):null}},{key:"renderNotifications",value:function(){if(this.state.notificationsLoaded){if(this.state.notifications.length){var e=[];return this.state.notifications.forEach((function(t){e.push(r.a.createElement(ne,{data:t,key:t._id}))})),e.push(r.a.createElement(q.a.Item,{href:"/notifications",className:"d-flex align-center w-100 text-primary my-see-all"},r.a.createElement("span",null,"See all"))),e}return r.a.createElement("p",{className:"my-notification-label text-center mb-0"},"No notifications to show.")}return r.a.createElement("div",{className:"my-notification-label d-flex justify-content-center align-middle"},r.a.createElement(V.a,{animation:"border",role:"status"}),r.a.createElement("span",{className:"ml-2"},"Loading..."))}},{key:"render",value:function(){return r.a.createElement(Y.a,{bg:"dark",variant:"dark",expand:"md",fixed:"top",className:"my-navbar-container"},r.a.createElement(B.a,null,this.state.showMobileSearch?null:r.a.createElement(Y.a.Brand,{href:"/feed"},"Mydria"),r.a.createElement(I.a,{inline:!0,className:this.state.showMobileSearch?"my-mobile-search":"d-none d-sm-flex",action:"/feed"},this.renderMobileSearchReturnButton(),r.a.createElement(I.a.Group,{controlId:"formBasicInput",className:"my-search-input"},r.a.createElement(I.a.Control,{type:"text",name:"search",placeholder:"Search",onKeyDown:this.handleKeyDown})),r.a.createElement(I.a.Group,{controlId:"formBasicSearch",className:"d-none d-sm-inline"},r.a.createElement(F.a,{variant:"dark",type:"submit"},r.a.createElement(X.a,{icon:Z.m,className:"my-profile-data-icon"})))),r.a.createElement(J.a,{className:this.state.showMobileSearch?"d-none":"flex-row ml-auto my-navbar"},r.a.createElement(J.a.Link,{href:"",onClick:this.toggleMobileSearch,className:"d-block d-sm-none mr-3"},r.a.createElement(X.a,{icon:Z.m,className:"my-profile-data-icon"})),r.a.createElement(te,{toggleDarkTheme:this.toggleDarkTheme}),r.a.createElement(q.a,{className:"d-none d-sm-flex align-itens-middle my-notifications mr-2",alignRight:!0,title:r.a.createElement(X.a,{icon:Z.b}),onClick:this.loadNotifications},this.renderNotifications()),r.a.createElement($,{nickname:this.props.user.nickname,noMargin:!0,pictureId:this.props.user.profilePicture,size:"tiny",tabletDesktopOnly:!0}),r.a.createElement(q.a,{title:this.props.user.nickname,alignRight:!0,id:"basic-nav-dropdown"},r.a.createElement(q.a.Item,{href:"/notifications",className:"d-sm-none"},"Notifications"),r.a.createElement(q.a.Item,{href:"/follows"},"People you follow"),r.a.createElement(q.a.Item,{href:"/profile/"+this.props.user.nickname},"Profile"),r.a.createElement(q.a.Item,{href:"#action/3.2"},"Settings"),r.a.createElement(q.a.Divider,null),r.a.createElement(q.a.Item,{onClick:this.logout},"Logout")))))}}]),a}(r.a.Component),se=Object(f.b)(W,Q)(re),oe=a(52),ie=a(28),ce=a(88),le=a(32),ue=a(101),me=a(99),de=a(114),pe=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).handleCloseClick=n.handleCloseClick.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"handleCloseClick",value:function(e){e.preventDefault(),this.props.removeTag(this.props.text)}},{key:"render",value:function(){return r.a.createElement(de.a,{variant:this.props.variant,className:"my-tag"},"#"+this.props.text," ",r.a.createElement("a",{href:"",onClick:this.handleCloseClick},r.a.createElement(X.a,{icon:Z.s})))}}]),a}(n.Component),he=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={editing:!1},n.getProfilePageUrl=n.getProfilePageUrl.bind(Object(w.a)(n)),n.isAuthor=n.isAuthor.bind(Object(w.a)(n)),n.editComment=n.editComment.bind(Object(w.a)(n)),n.uneditComment=n.uneditComment.bind(Object(w.a)(n)),n.saveChanges=n.saveChanges.bind(Object(w.a)(n)),n.renderEditForm=n.renderEditForm.bind(Object(w.a)(n)),n.getId=n.getId.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"getProfilePageUrl",value:function(){return"/profile/"+this.props.commentData.author.nickname}},{key:"renderCommentDate",value:function(){return new Date(this.props.commentData.date).toDateString()}},{key:"renderActions",value:function(){return this.isAuthor()?r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a.Item,{href:"#",onClick:this.editComment},r.a.createElement(X.a,{icon:Z.g})," Edit"),r.a.createElement(ie.a.Item,{href:"#",onClick:this.props.deleteComment},r.a.createElement(X.a,{icon:Z.t})," Delete")):r.a.createElement(ie.a.Item,{href:"#"},r.a.createElement(X.a,{icon:Z.k})," Hide this")}},{key:"editComment",value:function(){var e=this,t=this.props.commentData.text;this.setState({editing:!0}),setTimeout((function(){document.getElementById("edit-comment-form-"+e.getId()).value=t}),10)}},{key:"uneditComment",value:function(){this.setState({editing:!1})}},{key:"saveChanges",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(l.a)({},this.props.commentData),a=document.getElementById("edit-comment-form-"+this.getId()).value,t.text=a,e.next=5,N.updateComment(t);case 5:(n=e.sent).success?this.props.updateComment(n.data,(function(){r.uneditComment()})):console.log(n.error);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getId",value:function(){return this.props.commentData._id}},{key:"renderEditForm",value:function(){return r.a.createElement(I.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Control,{as:"textarea",rows:"3",id:"edit-comment-form-"+this.getId(),placeholder:"Leave a comment"})),r.a.createElement(R.a,{className:"mb-3 justify-content-end"},r.a.createElement(L.a,{sm:"auto"},r.a.createElement(F.a,{variant:"secondary",onClick:this.uneditComment},"Cancel")," ",r.a.createElement(F.a,{variant:"info",onClick:this.saveChanges},"Save"))))}},{key:"isAuthor",value:function(){return this.props.commentData.author._id===this.props.session.userId}},{key:"render",value:function(){return this.state.editing?this.renderEditForm():r.a.createElement(oe.a,null,r.a.createElement($,{nickname:this.props.commentData.author.nickname,pictureId:this.props.commentData.author.profilePicture,size:"small"}),r.a.createElement(oe.a.Body,null,r.a.createElement(R.a,{className:"justify-content-end mb-2"},r.a.createElement(L.a,null,r.a.createElement("div",null,r.a.createElement("a",{href:this.getProfilePageUrl(),className:"my-post-author-name"},r.a.createElement("strong",null,this.props.commentData.author.nickname)),r.a.createElement("div",{className:"my-post-date"},this.renderCommentDate()))),r.a.createElement(L.a,{xs:"auto"},r.a.createElement(ie.a,{className:"my-post-options",alignRight:!0}," ",r.a.createElement(ie.a.Toggle,{variant:"outline-dark",className:"my-post-options-button",id:"my-post-options-button-"+this.props.commentData._id},r.a.createElement(X.a,{icon:Z.h})),r.a.createElement(ie.a.Menu,null,this.renderActions())))),r.a.createElement(R.a,{className:"my-post-content"},r.a.createElement(L.a,null,r.a.createElement("p",{className:"my-post-text"},this.props.commentData.text)))))}}]),a}(n.Component),fe=Object(f.b)((function(e){return Object(l.a)({},e)}))(he),ge=function(e){if("string"===typeof e){for(;e.indexOf("  ")>-1;)e=e.replace("  "," ");" "===e.substring(0,1)&&(e=e.substring(1,e.length))," "===e.substring(e.length-1)&&(e=e.substring(0,e.length-1))}return e+""},be=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={postId:e.postId},n}return Object(y.a)(a,[{key:"getId",value:function(){return"comment-form-"+this.state.postId}},{key:"render",value:function(){return r.a.createElement(I.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Control,{as:"textarea",rows:"3",placeholder:"Leave a comment",id:this.getId()})),r.a.createElement(R.a,{className:"justify-content-between"},r.a.createElement(L.a,{md:5,lg:4},r.a.createElement(F.a,{variant:"secondary",block:!0,onClick:this.props.hideComments,className:"mb-3"},"Cancel")),r.a.createElement(L.a,{md:5,lg:4},r.a.createElement(F.a,{variant:"info",block:!0,onClick:this.props.publishComment,className:"mb-3"},"Comment"))))}}]),a}(n.Component),ve=Object(f.b)((function(e){return Object(l.a)({},e)}))(be),ke=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={tempLike:!1,tempUnlike:!1,showComments:!1,showShareModal:!1,showConfirmModal:!1,confirmModalData:{},error:!1,editing:!1,editTags:[],postComments:[]},n.renderPostDate=n.renderPostDate.bind(Object(w.a)(n)),n.liked=n.liked.bind(Object(w.a)(n)),n.unliked=n.unliked.bind(Object(w.a)(n)),n.likeClick=n.likeClick.bind(Object(w.a)(n)),n.unlikeClick=n.unlikeClick.bind(Object(w.a)(n)),n.renderLikesQty=n.renderLikesQty.bind(Object(w.a)(n)),n.renderUnlikesQty=n.renderUnlikesQty.bind(Object(w.a)(n)),n.clickCallback=n.clickCallback.bind(Object(w.a)(n)),n.renderPostTags=n.renderPostTags.bind(Object(w.a)(n)),n.renderActions=n.renderActions.bind(Object(w.a)(n)),n.renderError=n.renderError.bind(Object(w.a)(n)),n.userIsAuthor=n.userIsAuthor.bind(Object(w.a)(n)),n.hidePost=n.hidePost.bind(Object(w.a)(n)),n.deletePost=n.deletePost.bind(Object(w.a)(n)),n.editPost=n.editPost.bind(Object(w.a)(n)),n.uneditPost=n.uneditPost.bind(Object(w.a)(n)),n.renderEditForm=n.renderEditForm.bind(Object(w.a)(n)),n.removeEditTag=n.removeEditTag.bind(Object(w.a)(n)),n.renderEditTags=n.renderEditTags.bind(Object(w.a)(n)),n.onTagPush=n.onTagPush.bind(Object(w.a)(n)),n.saveChanges=n.saveChanges.bind(Object(w.a)(n)),n.getProfilePageUrl=n.getProfilePageUrl.bind(Object(w.a)(n)),n.renderPostPhoto=n.renderPostPhoto.bind(Object(w.a)(n)),n.toggleComments=n.toggleComments.bind(Object(w.a)(n)),n.renderComments=n.renderComments.bind(Object(w.a)(n)),n.publishComment=n.publishComment.bind(Object(w.a)(n)),n.deleteComment=n.deleteComment.bind(Object(w.a)(n)),n.updateComment=n.updateComment.bind(Object(w.a)(n)),n.sharePost=n.sharePost.bind(Object(w.a)(n)),n.renderMiniPost=n.renderMiniPost.bind(Object(w.a)(n)),n.toggleShareModal=n.toggleShareModal.bind(Object(w.a)(n)),n.renderShareModal=n.renderShareModal.bind(Object(w.a)(n)),n.closeConfirmModal=n.closeConfirmModal.bind(Object(w.a)(n)),n.showConfirmModal=n.showConfirmModal.bind(Object(w.a)(n)),n.renderConfirmModal=n.renderConfirmModal.bind(Object(w.a)(n)),n.renderLikeds=n.renderLikeds.bind(Object(w.a)(n)),n.renderUnlikeds=n.renderUnlikeds.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"userIsAuthor",value:function(){return this.props.session.userId===this.props.postData.author._id}},{key:"renderPostDate",value:function(){return new Date(this.props.postData.date).toDateString()}},{key:"liked",value:function(){var e=this;return this.props.postData.likedBy.filter((function(t){return t._id===e.props.session.userId})).length}},{key:"unliked",value:function(){var e=this;return this.props.postData.unlikedBy.filter((function(t){return t._id===e.props.session.userId})).length}},{key:"likeClick",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({tempLike:!0,tempUnlike:!1}),e.next=3,N.likePost(this.props.postData._id);case 3:(t=e.sent).success?this.props.updatePost(t.post,this.clickCallback):this.setState({error:t.error});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unlikeClick",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({tempLike:!1,tempUnlike:!0}),e.next=3,N.unlikePost(this.props.postData._id);case 3:(t=e.sent).success?this.props.updatePost(t.post,this.clickCallback):this.setState({error:t.error});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clickCallback",value:function(){this.setState({tempLike:!1,tempUnlike:!1})}},{key:"hidePost",value:function(){}},{key:"deletePost",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.postData._id,e.next=3,N.deletePost(t);case 3:e.sent.success?(this.setState({showConfirmModal:!1}),this.props.deletePost(t)):this.setState({error:"Something went wrong at our server. Please try again later."});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editPost",value:function(){var e=this,t=Object(H.a)(this.props.postData.tags),a=this.props.postData.text;this.setState({editing:!0,editTags:t}),setTimeout((function(){document.getElementById("edit-post-form-"+e.props.postData._id).value=a}),10)}},{key:"uneditPost",value:function(){this.setState({editing:!1})}},{key:"sharePost",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.postData.sharedFrom?this.props.postData.sharedFrom._id:this.props.postData._id,a=document.getElementById("edit-post-form-"+this.props.postData._id).value,n=this.state.editTags,e.next=5,N.sharePost(t,a,n);case 5:(r=e.sent).success?this.props.appendPost(r.data):console.log(r.error),this.toggleShareModal();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderLikesQty",value:function(){var e=this.state.tempLike?1:0;return" "+(this.props.postData.likedBy.length+e)}},{key:"renderUnlikesQty",value:function(){var e=this.state.tempUnlike?1:0;return" "+(this.props.postData.unlikedBy.length+e)}},{key:"renderPostTags",value:function(e){if(e.length){var t=[];return e.forEach((function(e){t.push(r.a.createElement("a",{href:"/feed?search="+e,key:e},"#",e))})),t}return null}},{key:"removeEditTag",value:function(e){var t=this.state.editTags.indexOf(e),a=Object(H.a)(this.state.editTags);a.splice(t,1),this.setState({editTags:a})}},{key:"renderEditTags",value:function(){var e=this,t=[];return this.state.editTags.forEach((function(a){t.push(r.a.createElement(pe,{text:a,key:a,variant:"info",removeTag:e.removeEditTag}))})),t.length?r.a.createElement(R.a,null,r.a.createElement(L.a,null,t)):null}},{key:"onTagPush",value:function(e){if(13===e.charCode){var t=document.getElementById("edit-postform-tags-input"+this.props.postData._id),a=t.value;a=ge(a);var n=this.state.editTags.indexOf(a)>=0;if(a&&!n){var r=this.state.editTags;r.push(a),this.setState({editTags:r}),t.value=""}}}},{key:"saveChanges",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r,s=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(l.a)({},this.props.postData),a=document.getElementById("edit-post-form-"+this.props.postData._id).value,n=this.state.editTags,t.text=a,t.tags=n,e.next=7,N.updatePost(t);case 7:(r=e.sent).success?this.props.updatePost(r.post,(function(){s.setState({editing:!1})})):this.setState({error:r.error});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publishComment",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r,s,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.postData._id,a="comment-form-"+t,n=document.getElementById(a).value,r={author:this.props.session.userId,text:n},e.next=6,N.publishComment(r,t);case 6:(s=e.sent).success&&(o=s.data,(i=this.state.postComments).push(o),this.setState({postComments:i}),document.getElementById(a).value="");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteComment",value:function(){var e=Object(k.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.deleteComment(t);case 2:if(!(a=e.sent).success){e.next=16;break}n=this.state.postComments,r=0;case 6:if(!(r<n.length)){e.next=13;break}if(n[r]._id!==t){e.next=10;break}return n.splice(r,1),e.abrupt("break",13);case 10:r++,e.next=6;break;case 13:this.setState({postComments:n}),e.next=17;break;case 16:console.log(a.error);case 17:this.setState({showConfirmModal:!1});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateComment",value:function(e,t){for(var a=this.state.postComments,n=0;n<a.length;n++)if(a[n]._id===e._id){a.splice(n,1,e);break}this.setState({postComments:a}),t()}},{key:"renderError",value:function(){return this.state.error?r.a.createElement(A.a,{variant:"danger"}," ",this.state.error," "):null}},{key:"getProfilePageUrl",value:function(){return"/profile/"+this.props.postData.author.nickname}},{key:"renderEditForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:"justify-content-end"},r.a.createElement(L.a,{xs:"auto"},r.a.createElement(F.a,{variant:"secondary",onClick:this.uneditPost},"Cancel")," ",r.a.createElement(F.a,{variant:"info",onClick:this.saveChanges},"Save"))));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Edit post"),this.renderEditTags(),r.a.createElement(I.a.Control,{type:"text",placeholder:"Tags",className:"mb-2",onKeyPress:this.onTagPush,id:"edit-postform-tags-input"+this.props.postData._id}),r.a.createElement(I.a.Control,{as:"textarea",rows:e?"3":"5",className:"mb-2",id:"edit-post-form-"+this.props.postData._id,placeholder:e?"Say something about it":""}),this.renderMiniPost(this.props.postData.sharedFrom?this.props.postData.sharedFrom:this.props.postData),e?null:t)}},{key:"renderActions",value:function(){var e=this;return this.userIsAuthor()?r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a.Item,{href:"#",onClick:this.editPost},r.a.createElement(X.a,{icon:Z.g,className:"mr-2"})," Edit"),r.a.createElement(ie.a.Item,{href:"#",onClick:function(){return e.showConfirmModal("Delete post","Are you sure you want to delete this post?","Delete",e.deletePost)}},r.a.createElement(X.a,{icon:Z.t,className:"mr-2"})," Delete")):r.a.createElement(ie.a.Item,{href:"#",onclick:"event.preventDefault()",onClick:this.hidePost},r.a.createElement(X.a,{icon:Z.k,className:"mr-2"})," Hide this")}},{key:"renderPostPhoto",value:function(e){return e?r.a.createElement(ce.a,{src:N.resolveImageUrl(e),fluid:!0}):null}},{key:"renderComments",value:function(){var e=this;if(this.state.showComments){var t=[];return this.state.postComments.forEach((function(a){t.push(r.a.createElement(fe,{commentData:a,deleteComment:function(){return e.showConfirmModal("Delete comment","Are you sure you want to delete this comment?","Delete",(function(){return e.deleteComment(a._id)}))},updateComment:e.updateComment}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{fluid:!0},t.length?t:r.a.createElement(A.a,{variant:"secondary"},"No comments yet"),r.a.createElement(ve,{postId:this.props.postData._id,publishComment:this.publishComment,hideComments:this.toggleComments})))}return null}},{key:"toggleComments",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.postComments.length){e.next=5;break}return e.next=3,N.getPostComments(this.props.postData._id);case 3:(t=e.sent).success?this.setState({postComments:t.data}):console.log(t.error);case 5:this.setState({showComments:!this.state.showComments});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleShareModal",value:function(){this.setState({showShareModal:!this.state.showShareModal})}},{key:"renderMiniPost",value:function(e){return r.a.createElement(oe.a,{className:"my-minipost"},r.a.createElement($,{nickname:e.author.nickname,pictureId:e.author.profilePicture,size:"small"}),r.a.createElement(oe.a.Body,null,this.renderPostTags(e.tags),r.a.createElement("p",{className:"my-post-text"},e.text),this.renderPostPhoto(e.img)))}},{key:"closeConfirmModal",value:function(){this.setState({showConfirmModal:!1})}},{key:"showConfirmModal",value:function(e,t,a,n){this.setState({showConfirmModal:!0,confirmModalData:{title:e,message:t,action:a,funct:n}})}},{key:"renderLikeds",value:function(e){for(var t=[],a=this.props.postData.likedBy.length,n=0;n<20;n++){var s=this.props.postData.likedBy[n];n<a&&t.push(r.a.createElement("div",null,s.nickname))}return a>20&&t.push(r.a.createElement("div",null,"...and ".concat(a-20," more"))),r.a.createElement(me.a,e,t)}},{key:"renderUnlikeds",value:function(e){for(var t=[],a=this.props.postData.unlikedBy.length,n=0;n<20;n++){var s=this.props.postData.unlikedBy[n];n<a&&t.push(r.a.createElement("div",null,s.nickname))}return a>20&&t.push(r.a.createElement("div",null,"...and ".concat(a-20," more"))),r.a.createElement(me.a,e,t)}},{key:"renderConfirmModal",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.closeConfirmModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{show:this.state.showConfirmModal,onHide:this.closeConfirmModal},r.a.createElement(le.a.Header,{closeButton:!0},r.a.createElement(le.a.Title,null,e)),r.a.createElement(le.a.Body,null,t),r.a.createElement(le.a.Footer,null,r.a.createElement(R.a,{className:"justify-content-between"},r.a.createElement(L.a,{md:3,className:"pl-sm-0 mb-3"},r.a.createElement(F.a,{variant:"secondary",onClick:this.closeConfirmModal,block:!0},"Cancel")),r.a.createElement(L.a,{md:3,className:"pr-sm-0"},r.a.createElement(F.a,{variant:"primary",onClick:n,block:!0},a))))))}},{key:"renderShareModal",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{show:this.state.showShareModal,onHide:this.toggleShareModal},r.a.createElement(le.a.Header,{closeButton:!0},r.a.createElement(le.a.Title,null,"Share post")),r.a.createElement(le.a.Body,null,this.renderEditForm(!0)),r.a.createElement(le.a.Footer,null,r.a.createElement(F.a,{variant:"secondary",onClick:this.toggleShareModal},"Cancel"),r.a.createElement(F.a,{variant:"primary",onClick:this.sharePost},"Share"))))}},{key:"render",value:function(){return r.a.createElement(B.a,{fluid:!0,className:"mb-3 my-post",key:this.props.postData._id},this.renderError(),this.state.editing?this.renderEditForm():r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,null,r.a.createElement($,{nickname:this.props.postData.author.nickname,pictureId:this.props.postData.author.profilePicture,size:"medium",tabletDesktopOnly:!0}),r.a.createElement(oe.a.Body,null,r.a.createElement(R.a,{className:"justify-content-end mb-2"},r.a.createElement(L.a,{className:"d-flex align-items-start flex-row"},r.a.createElement($,{nickname:this.props.postData.author.nickname,pictureId:this.props.postData.author.profilePicture,size:"medium",mobileOnly:!0}),r.a.createElement("div",null,r.a.createElement("a",{href:this.getProfilePageUrl(),className:"my-post-author-name"},r.a.createElement("strong",null,this.props.postData.author.nickname)),this.props.postData.sharedFrom?r.a.createElement(r.a.Fragment,null," ","shared from"," ",r.a.createElement("a",{href:"/profile/"+this.props.postData.author.nickname,className:"my-post-author-name"},r.a.createElement("strong",null,this.props.postData.sharedFrom.author.nickname))):null,r.a.createElement("div",{className:"my-post-date"},this.renderPostDate()))),r.a.createElement(L.a,{xs:"auto"},r.a.createElement(ie.a,{className:"my-post-options",alignRight:!0}," ",r.a.createElement(ie.a.Toggle,{variant:"outline-dark",className:"my-post-options-button",id:"my-post-options-button-"+this.props.postData._id},r.a.createElement(X.a,{icon:Z.h})),r.a.createElement(ie.a.Menu,null,this.renderActions())))),r.a.createElement(R.a,{className:"my-post-content"},r.a.createElement(L.a,null,this.renderPostTags(this.props.postData.tags),r.a.createElement("p",{className:"my-post-text"},this.props.postData.text),this.props.postData.sharedFrom?this.renderMiniPost(this.props.postData.sharedFrom):this.renderPostPhoto(this.props.postData.img))),this.renderComments())),r.a.createElement(R.a,{className:"justify-content-end my-post-buttons"},r.a.createElement(L.a,{xs:"auto"},r.a.createElement(ue.a,{placement:"right",delay:{show:250,hide:400},overlay:this.renderLikeds},r.a.createElement(F.a,{onClick:this.likeClick,variant:this.liked()?"dark":"outline-dark"},r.a.createElement(X.a,{icon:Z.q}),this.renderLikesQty()))," ",r.a.createElement(ue.a,{placement:"right",delay:{show:250,hide:400},overlay:this.renderUnlikeds},r.a.createElement(F.a,{onClick:this.unlikeClick,variant:this.unliked()?"dark":"outline-dark"},r.a.createElement(X.a,{icon:Z.p}),this.renderUnlikesQty()))," ",r.a.createElement(F.a,{variant:"outline-dark",onClick:this.toggleComments},r.a.createElement(X.a,{icon:Z.f})," "+this.props.postData.commentsTotal)," ",r.a.createElement(F.a,{variant:"outline-dark",onClick:this.toggleShareModal},r.a.createElement(X.a,{icon:Z.n})))),this.renderShareModal(),this.renderConfirmModal(this.state.confirmModalData.title,this.state.confirmModalData.message,this.state.confirmModalData.action,this.state.confirmModalData.funct)))}}]),a}(n.Component),Ee=Object(f.b)((function(e){return Object(l.a)({},e)}))(ke),ye=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={posting:!1,error:!1,warning:!1,message:!1,showPhotoForm:!1,hasPhoto:!1,photoSrc:null,tags:[]},n.publishPost=n.publishPost.bind(Object(w.a)(n)),n.renderErrorMessage=n.renderErrorMessage.bind(Object(w.a)(n)),n.renderWarningMessage=n.renderWarningMessage.bind(Object(w.a)(n)),n.renderMessage=n.renderMessage.bind(Object(w.a)(n)),n.onTagPush=n.onTagPush.bind(Object(w.a)(n)),n.renderTags=n.renderTags.bind(Object(w.a)(n)),n.removeTag=n.removeTag.bind(Object(w.a)(n)),n.handlePhotoPut=n.handlePhotoPut.bind(Object(w.a)(n)),n.removePhoto=n.removePhoto.bind(Object(w.a)(n)),n.togglePhotoForm=n.togglePhotoForm.bind(Object(w.a)(n)),n.renderPhotoButton=n.renderPhotoButton.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"publishPost",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({posting:!0}),t=this.buildPost(),e.next=4,N.publishPost(t,this.state.hasPhoto);case 4:(a=e.sent).success?(this.props.appendPost(a.post),this.setState({message:"Your post was successfully published."}),this.state.showPhotoForm&&this.togglePhotoForm(),document.getElementById("postText").value=""):this.setState({warning:a.error.data});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildPost",value:function(){return{text:document.getElementById("postText").value,author:this.props.session.userId,tags:this.state.tags}}},{key:"togglePhotoForm",value:function(){this.state.hasPhoto&&this.setState({hasPhoto:!1}),this.setState({showPhotoForm:!this.state.showPhotoForm})}},{key:"handlePhotoPut",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.setTmpImage();case 2:(t=e.sent).success?(a=t.data,n=N.getTmpImageUrl(a.name,a.ext),this.setState({hasPhoto:!0,photoSrc:n})):this.setState({error:t.error});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removePhoto",value:function(){this.setState({hasPhoto:!1}),document.getElementById("post-file").value=null}},{key:"renderErrorMessage",value:function(){return this.state.error?r.a.createElement(A.a,{variant:"danger",key:"errorMessage"},this.state.error):null}},{key:"renderWarningMessage",value:function(){return this.state.warning?r.a.createElement(A.a,{variant:"warning",key:"warningMessage"},this.state.warning):null}},{key:"renderMessage",value:function(){return this.state.message?r.a.createElement(A.a,{variant:"primary",key:"message"},this.state.message):null}},{key:"onTagPush",value:function(e){if(13===e.charCode){var t=document.getElementById("my-postform-tags-input"),a=t.value;a=ge(a);var n=this.state.tags.indexOf(a)>=0;if(a&&!n){var r=this.state.tags;r.push(a),this.setState({tags:r}),t.value=""}}}},{key:"removeTag",value:function(e){var t=this.state.tags.indexOf(e);this.state.tags.splice(t,1)}},{key:"renderTags",value:function(){var e=this,t=[];return this.state.tags.forEach((function(a){t.push(r.a.createElement(pe,{text:a,key:a,variant:"info",removeTag:e.removeTag}))})),t.length?r.a.createElement(I.a.Group,{className:"my-postform-tags-container"},t):null}},{key:"renderPostPhoto",value:function(){return this.state.hasPhoto?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"my-post-form-photo"},r.a.createElement(ce.a,{src:this.state.photoSrc,fluid:!0}),r.a.createElement("div",{className:"my-post-form-photo-wall"},r.a.createElement(F.a,{variant:"light",onClick:this.removePhoto,className:"mr-2 mt-2"},r.a.createElement(X.a,{icon:Z.r}))))):null}},{key:"renderPhotoForm",value:function(){return this.state.showPhotoForm?r.a.createElement(I.a.Group,null,r.a.createElement(I.a.File,{className:"position-relative",name:"file",onChange:this.handlePhotoPut,id:"post-file",feedbackTooltip:!0})):null}},{key:"renderPhotoButton",value:function(){return this.state.showPhotoForm?r.a.createElement(F.a,{variant:"secondary",onClick:this.togglePhotoForm,block:!0},"Cancel"):r.a.createElement(F.a,{variant:"success",onClick:this.togglePhotoForm,block:!0},r.a.createElement(X.a,{icon:Z.i})," ","Photo")}},{key:"render",value:function(){if(this.posting)return r.a.createElement(R.a,{className:"justify-content-center"},r.a.createElement(L.a,{xs:"auto"},r.a.createElement(V.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Posting..."))));var e=this.renderMessage(),t=this.renderErrorMessage(),a=this.renderWarningMessage();return r.a.createElement(r.a.Fragment,null,e,t,a,r.a.createElement(I.a,{className:"my-postform",onSubmit:function(e){return e.preventDefault()}},this.renderTags(),r.a.createElement(I.a.Group,{controlId:"postText"},r.a.createElement(I.a.Control,{as:"textarea",rows:"5",placeholder:"Whats's your take right now, ".concat(this.props.user.nickname,"?")})),this.renderPostPhoto(),this.renderPhotoForm(),r.a.createElement(I.a.Group,null,r.a.createElement(R.a,{className:"justify-content-end"},r.a.createElement(L.a,{md:8,lg:9,className:"my-tags-input pr-sm-0"},r.a.createElement(I.a.Control,{type:"text",placeholder:"Tags",onKeyPress:this.onTagPush,id:"my-postform-tags-input"})),r.a.createElement(L.a,{md:4,lg:3},this.renderPhotoButton()))),r.a.createElement(I.a.Group,null,r.a.createElement(F.a,{variant:"info",block:!0,onClick:this.publishPost},"Publish"))))}}]),a}(n.Component),we=Object(f.b)((function(e){return Object(l.a)({},e)}))(ye),Pe=a(53),Oe=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).renderFollowedUsers=n.renderFollowedUsers.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"renderFollowedUsers",value:function(){var e=[];return this.props.user.following.forEach((function(t){e.push(r.a.createElement(Pe.a.Item,{key:t.nickName,className:"pr-1 pr-md-2 pl-r pl-md-2"},r.a.createElement($,{nickname:t.nickname,pictureId:t.profilePicture,size:"small"}),r.a.createElement("a",{href:"/profile/"+t.nickname,className:"my-post-author-name"},r.a.createElement("strong",null,t.nickname))))})),e}},{key:"render",value:function(){return r.a.createElement("div",{className:"my-following-feed"},r.a.createElement("p",{className:"text-center mt-2"},this.props.user.following.length?"People you follow ":"You're not following anybody yet "),r.a.createElement(Pe.a,{variant:"flush"},this.renderFollowedUsers()),r.a.createElement("a",{href:"/follows",className:"see-all w-100 text-center mb-1"},"See all"))}}]),a}(n.Component),je=Object(f.b)((function(e){return Object(l.a)({},e)}))(Oe),Se=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={posts:[],searchString:"",searchResult:!1,sessionExpired:!1,loadingPosts:!0},n.loadPageData=n.loadPageData.bind(Object(w.a)(n)),n.renderPosts=n.renderPosts.bind(Object(w.a)(n)),n.appendPost=n.appendPost.bind(Object(w.a)(n)),n.updatePost=n.updatePost.bind(Object(w.a)(n)),n.deletePost=n.deletePost.bind(Object(w.a)(n)),n.getDarkTheme=n.getDarkTheme.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"loadPageData",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.location.search)){e.next=10;break}return a=new URL(document.location).searchParams,n=a.get("search"),e.next=6,N.search(t);case 6:(r=e.sent).success?this.setState({searchString:n,searchResult:!0,loadingPosts:!1,posts:r.data}):this.setState({loadingPosts:!1}),e.next=14;break;case 10:return e.next=12,N.loadSomePosts();case 12:s=e.sent,this.setState({loadingPosts:!1,posts:s});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"appendPost",value:function(e){var t=this.state.posts;t.unshift(e),this.setState({posts:t})}},{key:"updatePost",value:function(e,t){for(var a=Object(H.a)(this.state.posts),n=0;n<a.length;n++){if(a[n]._id===e._id){a.splice(n,1,e);break}}this.setState({posts:a}),t()}},{key:"deletePost",value:function(e){for(var t=Object(H.a)(this.state.posts),a=0;a<t.length;a++){if(t[a]._id===e){t.splice(a,1);break}}this.setState({posts:t})}},{key:"renderPosts",value:function(){var e=this,t=[];return this.state.posts.length?this.state.posts.forEach((function(a){t.push(r.a.createElement(Ee,{postData:a,updatePost:e.updatePost,deletePost:e.deletePost,appendPost:e.appendPost,key:a._id}))})):t=r.a.createElement("h6",null,"No results found."),t}},{key:"render",value:function(){return this.state.sessionExpired?r.a.createElement(i.a,{to:"/"}):this.state.loadingPosts?r.a.createElement("span",null):r.a.createElement(B.a,{fluid:!0,className:"my-no-padding"+this.getDarkTheme()},r.a.createElement(se,{logout:this.logout,toggleDarkTheme:this.toggleDarkTheme}),r.a.createElement(B.a,{className:this.getPageClasses()},r.a.createElement(R.a,null,r.a.createElement(L.a,{lg:2,className:"d-none d-lg-flex pr-0 pl-0"},r.a.createElement("div",{className:"my-ads pl-2"},"Ads")),r.a.createElement(L.a,{xs:12,sm:8,lg:7,className:"my-content-col order-md-2 order-lg-1 pt-1"},this.state.searchResult?r.a.createElement("h4",{className:"mb-3"},"Search results for '",this.state.searchString,"':"):r.a.createElement(we,{appendPost:this.appendPost}),this.renderPosts()),r.a.createElement(L.a,{sm:4,lg:3,className:"d-none d-sm-block pr-0 pr-lg-3 h-100 order-md-1 order-lg-2"},r.a.createElement(je,null)))))}}]),a}(z),Ce=Object(f.b)(W,Q)(Se),xe=a(33);var De=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={showEditForm:!1,showProfilePictureForm:!1,showErrorMessage:!1,showProfilePictureModal:!1},n.renderBio=n.renderBio.bind(Object(w.a)(n)),n.renderLocation=n.renderLocation.bind(Object(w.a)(n)),n.renderFollowButton=n.renderFollowButton.bind(Object(w.a)(n)),n.ownProfile=n.ownProfile.bind(Object(w.a)(n)),n.toggleEditForm=n.toggleEditForm.bind(Object(w.a)(n)),n.buildUserData=n.buildUserData.bind(Object(w.a)(n)),n.saveProfileData=n.saveProfileData.bind(Object(w.a)(n)),n.renderErrorMessage=n.renderErrorMessage.bind(Object(w.a)(n)),n.toggleProfilePictureForm=n.toggleProfilePictureForm.bind(Object(w.a)(n)),n.uploadProfilePicture=n.uploadProfilePicture.bind(Object(w.a)(n)),n.openProfilePictureModal=n.openProfilePictureModal.bind(Object(w.a)(n)),n.closeProfilePictureModal=n.closeProfilePictureModal.bind(Object(w.a)(n)),n.renderProfilePictureModal=n.renderProfilePictureModal.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"ownProfile",value:function(){return this.props.userData.nickname===this.props.user.nickname}},{key:"buildUserData",value:function(){var e=ge(document.getElementById("formBasicBio").value),t=ge(document.getElementById("formBasicCountry").value),a=ge(document.getElementById("formBasicCity").value);return Object(l.a)(Object(l.a)({},this.state.userData),{},{bio:e,country:t,city:a})}},{key:"saveProfileData",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.buildUserData(),e.next=3,N.updateUserData(this.props.user.nickname,t);case 3:e.sent.success?(this.props.updateUserData(t),this.setState({showEditForm:!1})):this.setState({showErrorMessage:"There was an error while trying to update your profile data. \n        Please wait a few moments and try again."});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderErrorMessage",value:function(){return this.state.showErrorMessage?r.a.createElement(xe.a.Body,null,r.a.createElement(A.a,{variant:"danger"},this.state.showErrorMessage)):null}},{key:"renderBio",value:function(){return this.props.userData.bio?r.a.createElement(xe.a.Text,{className:"my-profile-data-bio"},this.props.userData.bio):null}},{key:"renderLocation",value:function(){return this.props.userData.country?r.a.createElement(xe.a.Text,null,r.a.createElement(X.a,{icon:Z.j,className:"my-profile-data-icon"})," ",this.props.userData.city?this.props.userData.city+", ":null,this.props.userData.country):null}},{key:"renderFollowButton",value:function(){return this.ownProfile()?null:this.props.following?r.a.createElement(F.a,{variant:"success",onClick:this.props.unfollowClick,block:!0},"Unfollow"):r.a.createElement(F.a,{variant:"primary",onClick:this.props.followClick,block:!0},"Follow")}},{key:"toggleEditForm",value:function(){var e=this;this.setState({showEditForm:!this.state.showEditForm,showErrorMessage:!1}),this.state.showEditForm||setTimeout((function(){document.getElementById("formBasicBio").value=e.props.userData.bio,document.getElementById("formBasicCountry").value=e.props.userData.country,document.getElementById("formBasicCity").value=e.props.userData.city}),50)}},{key:"toggleProfilePictureForm",value:function(){this.setState({showProfilePictureForm:!this.state.showProfilePictureForm})}},{key:"uploadProfilePicture",value:function(){var e=Object(k.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.uploadProfilePicture();case 2:e.sent.success?window.location.reload():this.setState({showErrorMessage:"There was an error while trying to update your profile picture. \n        Please wait a few moments and try again."});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openProfilePictureModal",value:function(){this.setState({showProfilePictureModal:!0})}},{key:"closeProfilePictureModal",value:function(){this.setState({showProfilePictureModal:!1})}},{key:"renderProfilePictureModal",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{show:this.state.showProfilePictureModal,onHide:this.closeProfilePictureModal},r.a.createElement(le.a.Header,{closeButton:!0},r.a.createElement(le.a.Title,null," ")),r.a.createElement(le.a.Body,null,r.a.createElement($,{nickname:this.props.userData.nickname,noMargin:!0,pictureId:this.props.userData.profilePicture,size:"max",handleClick:function(){},square:!0}))))}},{key:"renderProfilePictureForm",value:function(){return this.state.showProfilePictureForm?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",id:"file",name:"file",className:"ml-3 mr-3"}),r.a.createElement(R.a,{className:"justify-content-between pl-3 pr-3"},r.a.createElement(L.a,{xs:6},r.a.createElement(F.a,{variant:"secondary",block:!0,onClick:this.toggleProfilePictureForm},"Cancel")),r.a.createElement(L.a,{xs:6},r.a.createElement(F.a,{variant:"primary",block:!0,onClick:this.uploadProfilePicture},"Upload")))):null}},{key:"renderEditForm",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a.Body,null,r.a.createElement(I.a,null,r.a.createElement(I.a.Group,{controlId:"formBasicBio"},r.a.createElement(I.a.Label,null,"Bio"),r.a.createElement(I.a.Control,{as:"textarea",rows:"3"})),r.a.createElement(I.a.Group,{controlId:"formBasicCountry"},r.a.createElement(I.a.Label,null,"Country"),r.a.createElement(I.a.Control,{type:"text",placeholder:"Country"})),r.a.createElement(I.a.Group,{controlId:"formBasicCity"},r.a.createElement(I.a.Label,null,"City"),r.a.createElement(I.a.Control,{type:"text",placeholder:"City"}))),r.a.createElement(R.a,{className:"justify-content-between"},r.a.createElement(L.a,{xs:6},r.a.createElement(F.a,{variant:"secondary",block:!0,onClick:this.toggleEditForm},"Cancel")),r.a.createElement(L.a,{xs:6},r.a.createElement(F.a,{variant:"primary",block:!0,onClick:this.saveProfileData},"Save")))))}},{key:"renderInfo",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a.Body,null,r.a.createElement(xe.a.Title,{className:"my-profile-data-title"},this.props.userData.nickname),this.renderBio(),this.renderLocation(),r.a.createElement(xe.a.Text,null,r.a.createElement(X.a,{icon:Z.u,className:"my-profile-data-icon"})," ",this.props.userData.followedBy.length+" follower"+(1===this.props.userData.followedBy.length?"":"s")),this.renderFollowButton()),this.ownProfile()?r.a.createElement(F.a,{variant:"link",onClick:this.toggleEditForm},"Edit"):null)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{className:"mb-3 my-profile-data"},r.a.createElement("div",{className:"my-profile-picture-wrapper"},r.a.createElement($,{nickname:this.props.userData.nickname,noMargin:!0,pictureId:this.props.userData.profilePicture,size:"max",handleClick:this.openProfilePictureModal}),this.renderProfilePictureForm()),this.renderErrorMessage(),r.a.createElement("div",{className:"my-profile-picture-button-wall"},r.a.createElement(F.a,{variant:"success",onClick:this.toggleProfilePictureForm,className:"my-profile-picture-change"},r.a.createElement(X.a,{icon:Z.c}))),this.state.showEditForm?this.renderEditForm():this.renderInfo()),this.renderProfilePictureModal())}}]),a}(n.Component),Ne=Object(f.b)((function(e){return Object(l.a)({},e)}),Q)(De),Te=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={posts:[],userData:{},following:!1,loadPostsError:!1,notFound:!0,loadingUserData:!0,loadingPosts:!0},n.ownProfile=n.ownProfile.bind(Object(w.a)(n)),n.loadPageData=n.loadPageData.bind(Object(w.a)(n)),n.followClick=n.followClick.bind(Object(w.a)(n)),n.unfollowClick=n.unfollowClick.bind(Object(w.a)(n)),n.renderPosts=n.renderPosts.bind(Object(w.a)(n)),n.updatePost=n.updatePost.bind(Object(w.a)(n)),n.deletePost=n.deletePost.bind(Object(w.a)(n)),n.isFollowing=n.isFollowing.bind(Object(w.a)(n)),n.appendPost=n.appendPost.bind(Object(w.a)(n)),n.updateUserData=n.updateUserData.bind(Object(w.a)(n)),n.getDarkTheme=n.getDarkTheme.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"ownProfile",value:function(){return this.state.userData.nickname===this.props.user.nickname}},{key:"isFollowing",value:function(){for(var e=this.props.user.following,t=this.state.userData._id,a=0;a<e.length;a++){if(e[a]===t)return!0}return!1}},{key:"loadPageData",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.nickname,e.next=3,N.getUserData(t);case 3:if(a=e.sent,this.setState({userData:a.success?a.userData:null,notFound:!a.success,loadingUserData:!1}),!a.success){e.next=11;break}return n=a.userData._id,e.next=9,N.getUserPosts(n);case 9:(r=e.sent).success?this.setState({posts:r.posts,loadingPosts:!1,following:this.isFollowing()}):this.setState({loadingPosts:!1,loadPostsError:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"followClick",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.followUser(this.state.userData._id);case 2:e.sent.success&&(t=this.props.user.following,a=this.state.userData.followedBy,n=this.state.userData._id,r=this.props.session.id,t.push(n),a.push(r),this.props.setUserFollowing(t),this.setState({following:this.isFollowing(),userData:Object(l.a)(Object(l.a)({},this.state.userData),{},{followedBy:a})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unfollowClick",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a,n,r,s,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.unfollowUser(this.state.userData._id);case 2:e.sent.success&&(t=this.props.user.following,a=this.state.userData.followedBy,n=this.state.userData._id,r=this.props.session.id,s=t.indexOf(n),o=a.indexOf(r),s>=0&&t.splice(s,1),o>=0&&a.splice(o,1),this.props.setUserFollowing(t),this.setState({following:this.isFollowing(),userData:Object(l.a)(Object(l.a)({},this.state.userData),{},{followedBy:a})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateUserData",value:function(e){this.setState({userData:Object(l.a)(Object(l.a)({},this.state.userData),e)})}},{key:"updatePost",value:function(e,t){for(var a=Object(H.a)(this.state.posts),n=0;n<a.length;n++){if(a[n]._id===e._id){a.splice(n,1,e);break}}this.setState({posts:a}),"function"===typeof t&&t()}},{key:"deletePost",value:function(e){for(var t=Object(H.a)(this.state.posts),a=0;a<t.length;a++){if(t[a]._id===e){t.splice(a,1);break}}this.setState({posts:t})}},{key:"appendPost",value:function(e){var t=this.state.posts;t.unshift(e),this.setState({posts:t})}},{key:"renderPosts",value:function(){var e=this;if(this.state.loadingPosts)return r.a.createElement(R.a,{className:"justify-content-center"},r.a.createElement(L.a,{xs:"auto"},r.a.createElement(V.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))));if(this.state.loadPostsError)return r.a.createElement(A.a,{className:"justify-content-center",variant:"danger"},"There was an error while loading the posts \ud83e\udd26\u200d\u2642\ufe0f");var t=[];return this.state.posts&&this.state.posts.forEach((function(a){t.push(r.a.createElement(Ee,{postData:a,updatePost:e.updatePost,deletePost:e.deletePost,key:a._id}))})),t.length?t:r.a.createElement("h3",{className:"ta-center"},"No posts yet...")}},{key:"renderPostForm",value:function(){return this.ownProfile()?r.a.createElement(we,{appendPost:this.appendPost}):null}},{key:"render",value:function(){return this.state.sessionExpired?r.a.createElement(i.a,{to:"/"}):this.state.loadingUserData?r.a.createElement("span",null):this.state.notFound?r.a.createElement(G,null):r.a.createElement(B.a,{fluid:!0,className:"my-no-padding"+this.getDarkTheme()},r.a.createElement(se,{logout:this.logout,toggleDarkTheme:this.toggleDarkTheme}),r.a.createElement(B.a,{className:this.getPageClasses()},r.a.createElement(R.a,null,r.a.createElement(L.a,{sm:4,lg:3},r.a.createElement(Ne,{userData:this.state.userData,following:this.state.following,loading:this.state.loadingUserData,followClick:this.followClick,unfollowClick:this.unfollowClick,updateUserData:this.updateUserData})),r.a.createElement(L.a,{xs:12,sm:8,lg:7,className:"my-content-col pl-sm-0 h-100"},this.renderPostForm(),this.renderPosts()),r.a.createElement(L.a,{lg:2,className:"d-none d-lg-flex pr-0"},r.a.createElement("div",{className:"my-ads pl-2"},"Ads")))))}}]),a}(z),Fe=Object(f.b)(W,Q)(Te),Ie=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={post:null,loadingPost:!0,sessionExpired:!1},n.loadPageData=n.loadPageData.bind(Object(w.a)(n)),n.updatePost=n.updatePost.bind(Object(w.a)(n)),n.deletePost=n.deletePost.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"loadPageData",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.postId,e.next=3,N.loadPostData(t);case 3:(a=e.sent).success&&this.setState({postData:a.data,loadingPost:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatePost",value:function(e,t){for(var a=Object(H.a)(this.state.posts),n=0;n<a.length;n++){if(a[n]._id===e._id){a.splice(n,1,e);break}}this.setState({posts:a}),"function"===typeof t&&t()}},{key:"deletePost",value:function(e){for(var t=Object(H.a)(this.state.posts),a=0;a<t.length;a++){if(t[a]._id===e){t.splice(a,1);break}}this.setState({posts:t})}},{key:"render",value:function(){return this.state.sessionExpired?r.a.createElement(i.a,{to:"/"}):this.state.loadingPost?r.a.createElement("span",null):r.a.createElement(B.a,{fluid:!0,className:"my-no-padding"+this.getDarkTheme()},r.a.createElement(se,{logout:this.logout,toggleDarkTheme:this.toggleDarkTheme}),r.a.createElement(B.a,{className:this.getPageClasses()},r.a.createElement(R.a,null,r.a.createElement(L.a,{lg:2,className:"d-none d-lg-flex pr-0 pl-0"},r.a.createElement("div",{className:"my-ads pl-2"},"Ads")),r.a.createElement(L.a,{xs:12,sm:8,lg:7,className:"my-content-col order-md-2 order-lg-1 pt-1"},r.a.createElement(Ee,{postData:this.state.postData,updatePost:this.updatePost,deletePost:this.deletePost})),r.a.createElement(L.a,{sm:4,lg:3,className:"d-none d-sm-block pr-0 pr-lg-3 h-100 order-md-1 order-lg-2"},r.a.createElement(je,null)))))}}]),a}(z),Me=Object(f.b)(W,Q)(Ie),_e=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={notifications:[],loadingNotifs:!0,sessionExpired:!1},n.loadPageData=n.loadPageData.bind(Object(w.a)(n)),n.renderNotifications=n.renderNotifications.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"loadPageData",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getNotifications();case 2:(t=e.sent).success&&this.setState({loadingNotifs:!1,notifications:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderNotifications",value:function(){for(var e=[],t=0;t<8;t++)if(this.state.notifications[t]){var a=this.state.notifications[t];e.push(r.a.createElement(ne,{data:a,key:a._id}))}return e.length?e:"No notifications to show."}},{key:"render",value:function(){return this.state.sessionExpired?r.a.createElement(i.a,{to:"/"}):this.state.loadingNotifs?r.a.createElement("span",null):r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{fluid:!0,className:"my-no-padding"+this.getDarkTheme()},r.a.createElement(se,{logout:this.logout,toggleDarkTheme:this.toggleDarkTheme}),r.a.createElement(B.a,{className:this.getPageClasses()},r.a.createElement(R.a,null,r.a.createElement(L.a,{lg:2,className:"d-none d-lg-flex pr-0 pl-0"},r.a.createElement("div",{className:"my-ads pl-2"},"Ads")),r.a.createElement(L.a,{xs:12,sm:8,lg:7,className:"my-content-col order-md-2 order-lg-1"},this.renderNotifications()),r.a.createElement(L.a,{sm:4,lg:3,className:"d-none d-sm-block pr-0 pr-lg-3 h-100 order-md-1 order-lg-2"},r.a.createElement(je,null))))))}}]),a}(z),Ue=Object(f.b)(W,Q)(_e),Be=a(67),Le=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={showingFollowed:!1,showingFollowing:!1,sessionExpired:!1},n.getFollowedQty=n.getFollowedQty.bind(Object(w.a)(n)),n.getFollowingQty=n.getFollowingQty.bind(Object(w.a)(n)),n.toggleShowFollowed=n.toggleShowFollowed.bind(Object(w.a)(n)),n.toggleShowFollowing=n.toggleShowFollowing.bind(Object(w.a)(n)),n.renderFollowedList=n.renderFollowedList.bind(Object(w.a)(n)),n.renderFollowingList=n.renderFollowingList.bind(Object(w.a)(n)),n}return Object(y.a)(a,[{key:"loadPageData",value:function(){}},{key:"getFollowedQty",value:function(){return this.props.user.followedBy.length}},{key:"getFollowingQty",value:function(){return this.props.user.following.length}},{key:"toggleShowFollowing",value:function(){this.setState({showingFollowing:!this.state.showingFollowing,showingFollowed:!1})}},{key:"toggleShowFollowed",value:function(){this.setState({showingFollowed:!this.state.showingFollowed,showingFollowing:!1})}},{key:"getFollowingCaretIcon",value:function(){return this.state.showingFollowing?r.a.createElement(X.a,{icon:Z.e}):r.a.createElement(X.a,{icon:Z.d})}},{key:"getFollowedCaretIcon",value:function(){return this.state.showingFollowed?r.a.createElement(X.a,{icon:Z.e}):r.a.createElement(X.a,{icon:Z.d})}},{key:"renderFollowingList",value:function(){var e=[];return this.props.user.following.forEach((function(t){e.push(r.a.createElement(Pe.a.Item,{key:t.nickName,className:"pr-1 pr-md-2 pl-r pl-md-2"},r.a.createElement($,{nickname:t.nickname,pictureId:t.profilePicture,size:"small"}),r.a.createElement("a",{href:"/profile/"+t.nickname,className:"my-post-author-name"},r.a.createElement("strong",null,t.nickname))))})),e}},{key:"renderFollowedList",value:function(){var e=[];return this.props.user.followedBy.forEach((function(t){e.push(r.a.createElement(Pe.a.Item,{key:t.nickName,className:"pr-1 pr-md-2 pl-r pl-md-2"},r.a.createElement($,{nickname:t.nickname,pictureId:t.profilePicture,size:"small"}),r.a.createElement("a",{href:"/profile/"+t.nickname,className:"my-post-author-name"},r.a.createElement("strong",null,t.nickname))))})),e}},{key:"render",value:function(){return this.state.sessionExpired?r.a.createElement(i.a,{to:"/"}):this.state.loadingNotifs?r.a.createElement("span",null):r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{fluid:!0,className:"my-no-padding"+this.getDarkTheme()},r.a.createElement(se,{logout:this.logout,toggleDarkTheme:this.toggleDarkTheme}),r.a.createElement(B.a,{className:this.getPageClasses()},r.a.createElement(R.a,null,r.a.createElement(L.a,{lg:2,className:"d-none d-lg-flex pr-0 pl-0"},r.a.createElement("div",{className:"my-ads pl-2"},"Ads")),r.a.createElement(L.a,{xs:12,sm:8,lg:7,className:"my-content-col order-md-2 order-lg-1"},r.a.createElement("h4",{className:"mb-3"},"People you follow"),r.a.createElement(Be.a,null,r.a.createElement(xe.a,null,r.a.createElement(xe.a.Header,{className:"followed-header d-flex  align-items-center justify-content-between"},r.a.createElement("span",null,"You're currently followed by ",this.getFollowedQty()," people."),r.a.createElement(Be.a.Toggle,{as:F.a,onClick:this.toggleShowFollowed,variant:"white",eventKey:"0"},this.getFollowedCaretIcon())),r.a.createElement(Be.a.Collapse,{eventKey:"0"},r.a.createElement(xe.a.Body,null,r.a.createElement(Pe.a,{variant:"flush"},this.renderFollowingList())))),r.a.createElement(xe.a,null,r.a.createElement(xe.a.Header,{className:"followed-header d-flex align-items-center justify-content-between"},r.a.createElement("span",null,"You are currently following ",this.getFollowingQty()," people."),r.a.createElement(Be.a.Toggle,{as:F.a,onClick:this.toggleShowFollowing,variant:"white",eventKey:"1"},this.getFollowingCaretIcon())),r.a.createElement(Be.a.Collapse,{eventKey:"1"},r.a.createElement(xe.a.Body,null,r.a.createElement(Pe.a,{variant:"flush"},this.renderFollowedList()))))))))))}}]),a}(z),Re=Object(f.b)(W,Q)(Le),Ae={Login:K,NotFound:G,Follows:Re,Feed:Ce,Profile:Fe,Post:Me,Notifications:Ue},Ke=Object(c.c)(h);o.a.render(r.a.createElement(f.a,{store:Ke},r.a.createElement(g.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:Ae.Login}),r.a.createElement(i.b,{exact:!0,path:"/profile/:nickname",component:Ae.Profile}),r.a.createElement(i.b,{exact:!0,path:"/post/:postId",component:Ae.Post}),r.a.createElement(i.b,{exact:!0,path:"/feed",component:Ae.Feed}),r.a.createElement(i.b,{exact:!0,path:"/notifications",component:Ae.Notifications}),r.a.createElement(i.b,{exact:!0,path:"/follows",component:Ae.Follows}),r.a.createElement(i.b,{path:"*",component:Ae.NotFound})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[115,1,2]]]);
//# sourceMappingURL=main.39a8985a.chunk.js.map